{"version":3,"sources":["./src/app/pages/tabs/customer-detail/customer-detail.page.ts","./src/app/pages/tabs/customer-detail/customer-detail-routing.model.ts","./src/app/shared/models/uploadImages.model.ts","./src/app/pages/tabs/customer-detail/customer-detail.page.html","./src/app/pages/tabs/customer-detail/customer-detail.module.ts"],"names":[],"mappings":"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","file":"customer-detail-customer-detail-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\r\nimport { ActionSheetController, ModalController } from '@ionic/angular';\r\nimport { ImageViewerComponent } from 'src/app/shared/components/image-viewer/image-viewer.component';\r\nimport { UploadImageModel } from 'src/app/shared/models/uploadImages.model';\r\nimport { UserModel } from 'src/app/shared/models/user.model';\r\nimport { CustomerService } from 'src/app/shared/services/apis/customer.service';\r\nimport { LocalStorgeService } from 'src/app/shared/services/locals/local-storge.service';\r\nimport { UploadService } from 'src/app/shared/services/apis/upload.service';\r\nimport { MsgService } from 'src/app/shared/services/locals/msg-message.service';\r\n\r\n@Component({\r\n  selector: 'app-customer-detail',\r\n  templateUrl: './customer-detail.page.html',\r\n})\r\nexport class CustomerDetailPage implements OnInit {\r\n\r\n  lstIdImg = [\r\n    {\r\n      id: 0,\r\n      base64: '',\r\n      isLoading: false\r\n    },\r\n    {\r\n      id: 1,\r\n      base64: '',\r\n      isLoading: false\r\n    },\r\n  ];\r\n\r\n  lstDriverCard = [\r\n    {\r\n      id: 0,\r\n      base64: '',\r\n      isLoading: false\r\n    },\r\n    {\r\n      id: 1,\r\n      base64: '',\r\n      isLoading: false\r\n    }\r\n  ];\r\n\r\n  user: UserModel;\r\n  dateFormat = 'DD/MM/YYYY';\r\n  uploadIdentityModel: UploadImageModel;\r\n  uploadDriverCardModel: UploadImageModel;\r\n  maxDate: any = new Date().toISOString();\r\n\r\n  constructor(\r\n    private actionSheetController: ActionSheetController,\r\n    private camera: Camera,\r\n    private customerService: CustomerService,\r\n    private localStorageService: LocalStorgeService,\r\n    private modalController: ModalController,\r\n    private uploadService: UploadService,\r\n    private msgService: MsgService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getCurrentUser();\r\n  }\r\n\r\n  async getCurrentUser(){\r\n    this.user  = new UserModel();\r\n    let Id = await this.localStorageService.get(\"userId\")\r\n    let res = await this.customerService.getCurrentCustomer(Id);\r\n    if(res.isSuccess){\r\n      this.user = res.data;\r\n      this.getImageByPath();\r\n    }\r\n  }\r\n\r\n  async getImageByPath(){\r\n    let prefix = \"wwwroot\";\r\n    if(this.user){\r\n      if(this.user.identityImage1Path){\r\n        let base64IdFront = await this.uploadService.getImageByPath(prefix + this.user.identityImage1Path);\r\n        if(base64IdFront){\r\n          this.lstIdImg[0].base64 = \"data:image/png;base64,\"+base64IdFront.fileBase64String;\r\n        }\r\n      }\r\n      if(this.user.identityImage2Path){\r\n        let base64IdBack = await this.uploadService.getImageByPath(prefix + this.user.identityImage2Path);\r\n        if(base64IdBack){\r\n          this.lstIdImg[1].base64 = \"data:image/png;base64,\"+base64IdBack.fileBase64String;\r\n        }\r\n      }\r\n      if(this.user.driverLicenseImage1Path){\r\n        let base64DvcFront = await this.uploadService.getImageByPath(prefix + this.user.driverLicenseImage1Path);\r\n        if (base64DvcFront){\r\n          this.lstDriverCard[0].base64 = \"data:image/png;base64,\"+base64DvcFront.fileBase64String;\r\n\r\n        }\r\n      }\r\n      if(this.user.driverLicenseImage2Path){\r\n        let base64DvcBack = await this.uploadService.getImageByPath(prefix + this.user.driverLicenseImage2Path);\r\n        if (base64DvcBack){\r\n          this.lstDriverCard[1].base64 = \"data:image/png;base64,\"+base64DvcBack.fileBase64String;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async takePicture(index, listImg) {\r\n    const image = listImg.find(x => x.id === index);\r\n\r\n    const optionTakePictureBase64: CameraOptions = {\r\n      quality: 100,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      sourceType: this.camera.PictureSourceType.CAMERA,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      correctOrientation: false,\r\n      targetWidth: 600,\r\n      encodingType: this.camera.EncodingType.PNG,\r\n    };\r\n\r\n    this.camera.getPicture(optionTakePictureBase64).then(data => {\r\n      image.isLoading = true;\r\n      image.base64 = 'data:image/png;base64,' + data;\r\n      image.isLoading = false;\r\n    }, err => {\r\n      image.isLoading = false;\r\n    });\r\n  }\r\n\r\n  async getPicture(index, listImg) {\r\n    const image = listImg.find(x => x.id === index);\r\n\r\n    const optionTakePictureBase64: CameraOptions = {\r\n      quality: 100,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      correctOrientation: false,\r\n      targetWidth: 600,\r\n      encodingType: this.camera.EncodingType.PNG,\r\n    };\r\n\r\n    this.camera.getPicture(optionTakePictureBase64).then(data => {\r\n      image.isLoading = true;\r\n      image.base64 = 'data:image/png;base64,' + data;\r\n      image.isLoading = false;\r\n    }, err => {\r\n      image.isLoading = false;\r\n    });\r\n  }\r\n\r\n  async openModal(index, listImg) {\r\n    const image = listImg.find(x => x.id === index);\r\n    const modal = await this.modalController.create({\r\n      component: ImageViewerComponent,\r\n      componentProps: {\r\n        'dataImage': [image.base64],\r\n      }\r\n    });\r\n    modal.present();\r\n  }\r\n\r\n  deleteImage(index, listImg) {\r\n    const image = listImg.find(x => x.id == index);\r\n    image.base64 = '';\r\n  }\r\n\r\n  async presentActionSheet(index, listImg) {\r\n    const actionSheet = await this.actionSheetController.create({\r\n      header: 'Bạn muốn thực hiện thao tác gì?',\r\n      buttons: [\r\n        {\r\n          text: 'Chụp ảnh',\r\n          icon: '../../../assets/icon/Cameraicon.svg',\r\n          handler: () => {\r\n            this.takePicture(index, listImg);\r\n          }\r\n        },\r\n        {\r\n          text: 'Chọn ảnh từ thư viện',\r\n          icon: '../../../assets/icon/Imageicon.svg',\r\n          handler: () => {\r\n            this.getPicture(index, listImg);\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await actionSheet.present();\r\n  }\r\n\r\n  async secondActionSheet(index, listImg) {\r\n    const actionSheet = await this.actionSheetController.create({\r\n      header: 'Bạn muốn thực hiện thao tác gì?',\r\n      buttons: [\r\n        {\r\n          text: 'Xem',\r\n          icon: '../../../assets/icon/Viewicon.svg',\r\n          handler: () => {\r\n            this.openModal(index, listImg);\r\n          }\r\n        },\r\n        {\r\n          text: 'Chụp lại ảnh',\r\n          icon: '../../../assets/icon/Cameraicon.svg',\r\n          handler: () => {\r\n            this.takePicture(index, listImg);\r\n          }\r\n        },\r\n        {\r\n          text: 'Chọn lại ảnh',\r\n          icon: '../../../assets/icon/Imageicon.svg',\r\n          handler: () => {\r\n            this.getPicture(index, listImg);\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await actionSheet.present();\r\n  }\r\n\r\n  back(){\r\n    window.history.back();\r\n  }\r\n\r\n  base64ImageToBlob(str, filename) {\r\n    // extract content type and base64 payload from original string\r\n    var pos = str.indexOf(';base64,');\r\n    var type = str.substring(5, pos);\r\n    var b64 = str.substr(pos + 8);\r\n  \r\n    // decode base64\r\n    var imageContent = atob(b64);\r\n  \r\n    // create an ArrayBuffer and a view (as unsigned 8-bit)\r\n    var buffer = new ArrayBuffer(imageContent.length);\r\n    var view = new Uint8Array(buffer);\r\n  \r\n    // fill the view, using the decoded base64\r\n    for(var n = 0; n < imageContent.length; n++) {\r\n      view[n] = imageContent.charCodeAt(n);\r\n    }\r\n  \r\n    // convert ArrayBuffer to Blob\r\n    var blob = new File([buffer], filename, { type: type });\r\n  \r\n    return blob;\r\n  }\r\n\r\n  uploadImage(){\r\n    this.uploadIdentityModel = new UploadImageModel();\r\n    this.uploadDriverCardModel = new UploadImageModel();\r\n    if(this.lstIdImg[0].base64){\r\n      this.uploadIdentityModel.file1st = this.base64ImageToBlob(this.lstIdImg[0].base64, 'identityFront.png');\r\n    }\r\n    if(this.lstIdImg[1].base64){\r\n      this.uploadIdentityModel.file2nd = this.base64ImageToBlob(this.lstIdImg[1].base64, 'identityBack.png');\r\n    }\r\n    if(this.lstDriverCard[0].base64){\r\n      this.uploadDriverCardModel.file1st = this.base64ImageToBlob(this.lstDriverCard[0].base64, 'driverCardFront.png');\r\n    }\r\n    if(this.lstDriverCard[1].base64){\r\n      this.uploadDriverCardModel.file2nd = this.base64ImageToBlob(this.lstDriverCard[1].base64, 'driverCardBack.png');\r\n    }\r\n  }\r\n\r\n  async save(){\r\n    if(!this.checkValidSave()) {\r\n      return;\r\n    }\r\n    this.user.birthDate = this.user.birthDate ? new Date(this.user.birthDate).toISOString() : '';\r\n    await this.uploadImage();\r\n    Promise.all([this.uploadService.UploadIdentity(this.uploadIdentityModel),\r\n                this.uploadService.UploadDriverCard(this.uploadDriverCardModel),\r\n                this.customerService.updateCustomer(this.user)]).then(res => {\r\n            if(res[0] && res[1] && res[2]){\r\n              this.msgService.alertOK(\"Cập nhật thành công!\")\r\n            }\r\n      })\r\n  }\r\n\r\n  checkValidSave(){\r\n    let regEmail = new RegExp(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\r\n    \r\n    if(!this.user.name || !this.user.email || !this.user.birthDate || !this.user.identityCard){\r\n      this.msgService.error(\"Vui lòng nhập đầy đủ thông tin!\")\r\n      return false;\r\n    }\r\n    if(!regEmail.test(this.user.email)){\r\n      this.msgService.error(\"Vui lòng nhập Email đúng định dạng!\")\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { CustomerDetailPage } from './customer-detail.page';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '', \r\n    component: CustomerDetailPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CustomerDetailPageRoutingModule { }\r\n","export class UploadImageModel {\r\n    file1st: any;\r\n    file2nd: any;\r\n}","export default \"<ion-header class=\\\"cus-detail-header\\\">\\r\\n    <ion-toolbar>\\r\\n      <ion-icon class=\\\"cus-info-back ion-margin-start\\\" name=\\\"arrow-back\\\" slot=\\\"start\\\" (click)=\\\"back()\\\"></ion-icon>\\r\\n      <ion-title style=\\\"text-align: center;\\\">{{'customerDetail.title' | translate}}</ion-title>\\r\\n      <ion-label class=\\\"cus-info-save ion-margin-end\\\" slot=\\\"end\\\" (click)=\\\"save()\\\">{{'customerDetail.save' | translate}}</ion-label>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <ion-row>\\r\\n        <ion-col>\\r\\n            <ion-item lines=\\\"none\\\">\\r\\n                <ion-label style=\\\"opacity: 0.5;\\\">{{'customerDetail.phoneNumber' | translate}}</ion-label>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-margin-bottom\\\">\\r\\n                <ion-img src=\\\"../../../assets/icon/password.svg\\\" class=\\\"ion-padding-end\\\"></ion-img>\\r\\n                <ion-input [(ngModel)]=\\\"user.phoneNumber\\\" maxlength=\\\"11\\\" disabled></ion-input>\\r\\n            </ion-item>\\r\\n\\r\\n            <ion-item lines=\\\"none\\\">\\r\\n                <ion-label style=\\\"opacity: 0.5;\\\">{{'customerDetail.name' | translate}}</ion-label>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-margin-bottom\\\">\\r\\n                <ion-img src=\\\"../../../assets/icon/password.svg\\\" style=\\\"padding-right: 10px;\\\"></ion-img>\\r\\n                <ion-input [(ngModel)]=\\\"user.name\\\" maxlength=\\\"30\\\"></ion-input>\\r\\n            </ion-item>\\r\\n\\r\\n            <ion-item lines=\\\"none\\\">\\r\\n                <ion-label style=\\\"opacity: 0.5;\\\">{{'customerDetail.birtDate' | translate}}</ion-label>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-margin-bottom\\\">\\r\\n                <ion-img src=\\\"../../../assets/icon/password.svg\\\" style=\\\"padding-right: 10px;\\\"></ion-img>\\r\\n                <ion-datetime [(ngModel)]=\\\"user.birthDate\\\" [displayFormat]=\\\"dateFormat\\\" [max]=\\\"maxDate\\\"></ion-datetime>\\r\\n            </ion-item>\\r\\n\\r\\n            <ion-item lines=\\\"none\\\">\\r\\n                <ion-label style=\\\"opacity: 0.5;\\\">{{'customerDetail.email' | translate}}</ion-label>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-margin-bottom\\\">\\r\\n                <ion-img src=\\\"../../../assets/icon/password.svg\\\" style=\\\"padding-right: 10px;\\\"></ion-img>\\r\\n                <ion-input [(ngModel)]=\\\"user.email\\\"></ion-input>\\r\\n            </ion-item>\\r\\n\\r\\n            <ion-item style=\\\"--border-style: none;\\\">\\r\\n                <ion-label style=\\\"opacity: 0.5;\\\">{{'customerDetail.gender' | translate}}</ion-label>\\r\\n                <ion-radio-group [(ngModel)]=\\\"user.gender\\\" style=\\\"display: flex;\\\" mode=\\\"md\\\">\\r\\n                    <ion-item style=\\\"--border-style: none;\\\">\\r\\n                        <ion-label>{{'customerDetail.male' | translate}}</ion-label>\\r\\n                        <ion-radio slot=\\\"start\\\" [value]=\\\"true\\\" style=\\\"--color-checked: #34A4B6;\\\"></ion-radio>\\r\\n                    </ion-item>\\r\\n                \\r\\n                    <ion-item style=\\\"--border-style: none;\\\">\\r\\n                        <ion-label>{{'customerDetail.female' | translate}}</ion-label>\\r\\n                        <ion-radio slot=\\\"start\\\" [value]=\\\"false\\\" style=\\\"--color-checked: #34A4B6;\\\"></ion-radio>\\r\\n                    </ion-item>\\r\\n                </ion-radio-group>\\r\\n            </ion-item>\\r\\n\\r\\n            <ion-item lines=\\\"none\\\">\\r\\n                <ion-label style=\\\"opacity: 0.5;\\\">{{'customerDetail.Identity' | translate}}</ion-label>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-margin-bottom\\\">\\r\\n                <ion-img src=\\\"../../../assets/icon/password.svg\\\" style=\\\"padding-right: 10px;\\\"></ion-img>\\r\\n                <ion-input [(ngModel)]=\\\"user.identityCard\\\"></ion-input>\\r\\n            </ion-item>\\r\\n\\r\\n            <ion-row class=\\\"ion-margin-top\\\">\\r\\n                <ion-col size=\\\"6\\\" class=\\\"ion-text-center\\\">\\r\\n                    <img *ngIf=\\\"lstIdImg[0].base64\\\" [src]=\\\"lstIdImg[0].base64\\\" (click)=\\\"secondActionSheet(0, lstIdImg)\\\" />\\r\\n                    <img *ngIf=\\\"!(lstIdImg[0].base64)\\\" src=\\\"../../../../assets/images/image-default.svg\\\" (click)=\\\"presentActionSheet(0, lstIdImg)\\\"/>\\r\\n                </ion-col>\\r\\n                <ion-col size=\\\"6\\\" class=\\\"ion-text-center\\\">\\r\\n                    <img *ngIf=\\\"lstIdImg[1].base64\\\" [src]=\\\"lstIdImg[1].base64\\\" (click)=\\\"secondActionSheet(1, lstIdImg)\\\"/>\\r\\n                    <img *ngIf=\\\"!(lstIdImg[1].base64)\\\" src=\\\"../../../../assets/images/image-default.svg\\\" (click)=\\\"presentActionSheet(1, lstIdImg)\\\"/>\\r\\n                </ion-col>\\r\\n            </ion-row>\\r\\n\\r\\n            <ion-item lines=\\\"none\\\">\\r\\n                <ion-label style=\\\"opacity: 0.5;\\\">{{'customerDetail.driverCard' | translate}}</ion-label>\\r\\n            </ion-item>\\r\\n\\r\\n            <ion-row class=\\\"ion-margin-top\\\">\\r\\n                <ion-col size=\\\"6\\\" class=\\\"ion-text-center\\\">\\r\\n                    <img *ngIf=\\\"lstDriverCard[0].base64\\\" [src]=\\\"lstDriverCard[0].base64\\\" (click)=\\\"secondActionSheet(0, lstDriverCard)\\\"/>\\r\\n                    <img *ngIf=\\\"!(lstDriverCard[0].base64)\\\" src=\\\"../../../../assets/images/image-default.svg\\\" (click)=\\\"presentActionSheet(0, lstDriverCard)\\\"/>\\r\\n                </ion-col>\\r\\n                <ion-col size=\\\"6\\\" class=\\\"ion-text-center\\\">\\r\\n                    <img *ngIf=\\\"lstDriverCard[1].base64\\\" [src]=\\\"lstDriverCard[1].base64\\\"(click)=\\\"secondActionSheet(1, lstDriverCard)\\\" />\\r\\n                    <img *ngIf=\\\"!(lstDriverCard[1].base64)\\\" src=\\\"../../../../assets/images/image-default.svg\\\" (click)=\\\"presentActionSheet(1, lstDriverCard)\\\" />\\r\\n                </ion-col>\\r\\n            </ion-row>\\r\\n        </ion-col>\\r\\n    </ion-row>\\r\\n</ion-content>\\r\\n  \\r\\n  \";","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Camera } from '@ionic-native/camera/ngx';\r\n//\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CustomerDetailPageRoutingModule } from './customer-detail-routing.model';\r\nimport { CustomerDetailPage } from './customer-detail.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    CustomerDetailPageRoutingModule\r\n  ],\r\n  declarations: [CustomerDetailPage],\r\n  providers:[\r\n    Camera\r\n  ]\r\n})\r\nexport class CustomerDetailPageModule { }\r\n"],"sourceRoot":"webpack:///"}